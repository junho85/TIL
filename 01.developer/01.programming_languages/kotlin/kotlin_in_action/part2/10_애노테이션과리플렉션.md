# 10장 애노테이션과 리플렉션
* 애노테이션 적용과 정의
* 리플렉션을 사용해 실행 시점에 객체 내부 관찰
* 코틀린 실전 프로젝트 예제

## 10.1 애노테이션 선언과 적용

### 10.1.1 애노테이션 적용
코틀린에서는 자바와 같은 방법으로 애노테이션을 사용할 수 있다.

### 10.1.2 애노테이션 대상

사용 지점 대상
* property 프로퍼티 전체. 자바에서 선언된 애노테이션에는 이 사용 지점 대상을 사용할 수 없다
* field 프로퍼티에 의해 생성되는 (뒷받침하는) 필드
* get 프로퍼티 게터
* set 프로퍼티 세터
* receiver 확장 함수나 프로퍼티의 수신 객체 파라미터
* param 생성자 파라미터
* setparam 세터 파라미터
* delegate 위임 프로퍼티의 위임 인스턴스를 담아둔 필드
* file 파일 안에 선언된 최상위 함수와 프로퍼티를 담아두는 클래스
...

@file:JvmName("StringFunctions")
3.2.3 절


### 10.1.3 애노테이션을 활용한 JSON 직렬화 제어

### 10.1.4 애노테이션 선언


### 10.1.5 메타애노테이션: 애노테이션을 처리하는 방법 제어
자바와 마찬가지로 코틀린 클애노테이션 클래스에도 애노테이션을 붙일 수 있다. 애노테이션 클래스에 적용할 수 있는 애노테이션을 메타애노테이션(meta-annotation)이라고 부른다.


### 10.1.6 애노테이션 파라미터로 클래스 사용

### 10.1.7 애노테이션 파라미터로 제네릭 클래스 받기

## 10.2 리플렉션: 실행 시점에 코틀린 객체 내부 관찰

### 10.2.1 코틀린 리플렉션 API: KClass, KCallable, KFunction, KProperty

### 10.2.2 리플렉션을 사용한 객체 직렬화 구현

### 10.2.3 애노테이션을 활용한 직렬화 제어

### 10.2.4 JSON 파싱과 객체 역직렬화

### 10.2.5 최종 역직렬화 단계: callBy(), 리플렉션을 사용해 객체 만들기

## 10.3 요약
* 코틀린에서 애노테이션을 적용할 때 사용하는 문법은 자바와 거의 같다.
* 코틀린에서는 자바보다 더 넓은 대상에 애노테이션을 적용할 수 있다. 그런 대상으로는 파일과 식을 들 수 있다.
* 애노테이션 인자로 원시 타입 값, 문자열, 이넘, 클래스 참조, 다른 애노테이션 클래스의 인스턴스, 그리고 지금까지 말한 여러 유형의 값으로 이뤄진 배열을 사용할 수 있다.
* @get:Rule을 사용해 애노테이션의 사용 대상을 명시하면 한 코틀린 선언이 여러 가지 바이트코드 요소를 만들어내는 경우 정확히 어떤 부분에 애노테이션을 적용할지 지정할 수 있다.
* 애노테이션 클래스를 정의할 때는 본문이 없고 주 생성자의 모든 파라미터를 val 프로퍼티로 표시한 코틀린 클래스를 사용한다.
* 메타애노테이션을 사용해 대상, 애노테이션 유지 방식 등 여러 애노테이션 특성을 지정할 수 있다.
* 리플렉션 API를 통해 실행 시점에 객체의 메소드와 프로퍼티를 열거하고 접근할 수 있다. 리플렉션 API에는 클래스(KClass), 함수(KFunction) 등 여러 종류의 선언을 표현하는 인터페이스가 들어있다.
* 클래스를 컴파일 시점에 알고 있다면 KClass 인스턴스를 얻기 위해 ClassName::class를 사용한다. 하지만 실행 시점에 obj 변수에 담긴 객체로부터 KClass 인스턴스를 얻기 위해서는 obj.javaClass.kotlin을 사용한다.
* KFunction과 KProperty 인터페이스는 모두 KCallable을 확장한다. KCallable은 재네릭 call 메소드를 제공한다.
* KCallable.callBy 메소드를 사용하면 메소드를 호출하면서 디폴트 파라미터값을 사용할 수 있다.
* KFunction0, KFunction,1 등의 인터페이스는 모두 파라미터 수가 다른 함수를 표현하며, invoke 메소드를 사용해 함수를 호출할 수 있다.
* KProperty0는 최상위 프로퍼티나 변수, KProperty1은 수신 객체가 있는 프로퍼티에 접근할 때 쓰는 인터페이스다. 두 인터페이스 모두 get 메소드를 사용해 프로퍼티 값을 가져올 수 있다. KMutableProperty0과 KMutableProperty1은 각각 KProperty0과 KProperty1을 확장하며, set 메소드를 통해 프로퍼티값을 변경할 수 있게 해준다.
