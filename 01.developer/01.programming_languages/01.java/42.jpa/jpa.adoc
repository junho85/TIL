= JPA Java Persistent API

* https://blog.woniper.net/255[[JPA\] JPAë€ ë¬´ì—‡ì¸ê°€? 2015.05.01]

== Naming Strategy ì´ë¦„ ë§¤í•‘ ì „ëµ

* https://www.popit.kr/intellij%EC%97%90%EC%84%9C-%EC%BD%94%EB%93%9C-%ED%95%9C-%EC%A4%84-%EC%95%88-%EC%A7%9C%EA%B3%A0-jpql-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0/[IntelliJì—ì„œ ì½”ë“œ í•œ ì¤„ ì•ˆ ì§œê³  JPQL ì‹¤í–‰í•˜ê¸° 2017.12.26]
* https://www.baeldung.com/hibernate-naming-strategy[Hibernate 5 Naming Strategy Configuration 2018.10.28]
* https://mycup.tistory.com/237[Springboot jpa & Hibernate Naming Strategy(ë„¤ì´ë° ì „ëµ) 2018.08.31]

== References

* https://ramees.tistory.com/48[@Convert ì‚¬ìš©í•´ì„œ Objectë¥¼ Json í˜•ì‹ìœ¼ë¡œ ì €ì¥í•˜ê¸° 2019.12.11]


https://www.youtube.com/watch?v=Ppqc3qN75EE[[10ë¶„ í…Œì½”í†¡] ğŸ™†â€â™‚ï¸ì˜¬ë ˆì˜ JPAì™€ JDBC 2019.07.19]

ì²´ìŠ¤ ê³¼ì œ (1) í…Œì´ë¸” ìƒì„±

----
create table chess_board(
id int auto_increment primary key...
...
----

ì²´ìŠ¤ ê³¼ì œ (2) connection ì„¤ì •

----
public class DBConnection {
  public static Connection getConnection() throws SQLException {
    Connection con = null;
...
----

ì²´ìŠ¤ ê³¼ì œ (3) ë°ì´í„° ì‚½ì…

----
public class ChessBoardDAO {
  private Connection connection;
  public ChessBoardDAO(Connection connection) { this.connection = connection; }
...
----

ì²´ìŠ¤ ê³¼ì œë¡œ ì•Œì•„ë³¸ jdbcì˜ íŠ¹ì§•
1. sqlë¬¸
2. connection ê´€ë¦¬
3. preparedstatement, resultset ê°ì²´

connection ê°ì²´ê°€ dbì™€ appì˜ ì—°ê²°ì„ ê´€ë¦¬í•˜ê³ , preparedstatementê°€ sqlì„ ì „ë‹¬í•˜ë©°...


jdbc ê°œë…

jpa ì¥ì 
1. sql ë¬¸ì„ ì§ì ‘ java applicatino ë‚´ì—ì„œ ì ì„..


jpa ì¥ì : 1. sqlë¬¸ì„ ì ì„ ê²½ìš°ê°€ ì ì–´ì§

----
public class ChessBoardDAO {
...
----

jpa ì¥ì  2. sql êµ¬ì¡°ë¥¼ java application ë‚´ì—ì„œ ì ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

(1) Order tableì´ foreign keyë¡œ Member tableì˜ member idë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°
----
@Entity
@Table(name = "ORDERS")
public class Order {

  @Id @GeneratedValue
  @Column(name = "ORDER_ID")
  private Long id;

  @ManyToOne
  @JoinColumn(name = "MEMBER_ID")
...

----

Why jpa hibernate is awful?


https://www.youtube.com/watch?v=mezbxKGu68Y[[10ë¶„ í…Œì½”í†¡] ğŸ§˜â€â™‚ï¸ì½”ì¦ˆì˜ JDBC, SQLMAPPER, ORM 2020.06.24]

JDBC SQLMAPPER ORM

ê³µí†µì ?

PERSISTENCE ì˜ì†ì„±

ë°ì´í„°ë¥¼ ìƒì„±í•œ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ì´ ì¢…ë£Œë˜ë”ë¼ë„ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” ë°ì´í„°ì˜ íŠ¹ì„±

ì˜êµ¬íˆ ì €ì¥ë˜ëŠ” ê·¸ ì–´ë–¤ ê²ƒ

image::image-2021-03-26-10-45-46-853.png[]

ì—­ì‚¬

image::image-2021-03-26-10-46-29-578.png[]

ê°€ì¥ íš¨ìœ¨ì ìœ¼ë¡œ ê¸°ìˆ ì„ ë°°ìš°ëŠ” ë°©ë²•

...

"ì—­ì‚¬ë¥¼ ìŠì€ ê¸°ìˆ ì—ê² ë¯¸ë˜ë€ ì—†ë‹¤" - ìµëª… í¬ë£¨ -

JDBC     SQLMAPPER     ORM
JDBC API MyBatic       JPA
         Spring JDBC   HIBERNATE
                       Spring JDBC/JPA

1997ë…„

image::image-2021-03-26-10-48-17-710.png[]

JDBC API
JAVA DATABASE CONNECTIVITY

1990ë…„ëŒ€ ì¤‘ë°˜.

- ì¸í„°ë„· ë³´ê¸‰. DB ì‚°ì—… ì„±ì¥
- ì˜¨ë¼ì¸ ë¹„ì§€ë‹ˆìŠ¤ì˜ íˆ¬ì ì¦ê°€. DB Connectorì— ëŒ€í•œ ë‹ˆì¦ˆ
...

image::image-2021-03-26-10-48-56-156.png[]

image::image-2021-03-26-10-49-28-355.png[]

ë¶ˆí¸í•œ ì ?

ì¤‘ë³µ ì½”ë“œ, ì¿¼ë¦¬ ì‘ì„±, ì»¤ë„¥ì…˜ ê´€ë¦¬...

image::image-2021-03-26-10-50-43-329.png[]

----
public class CrewDAO {
  private JdbcTemplate jdbcTemplate;
  @Autowired
  public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
  }
  public List<Crew> getCrews() {
    return jdbcTemplate.query("select * from crews", new...
}
----

image::image-2021-03-26-10-52-03-294.png[]

ë¶ˆí¸í•œ ê²ƒë“¤ì„ ì¶”ìƒí™”

MyBatis ì£¼ ê´€ì‹¬ì‚¬ëŠ” SQL ë¶„ë¦¬!

MYBATIS

Queryë¥¼ Javaì—ì„œ XMLë¡œ
- ë³µì¡í•œ JDBCì½”ë“œ X
- ResultSetê³¼ ê°™ì´ ê²°ê³¼ê°’ì„ ë§µí•‘í•˜ëŠ” ê°ì²´ X

- ê°„ë‹¨í•œ ì„¤ì •!
...

image::image-2021-03-26-10-53-04-651.png[]

SqlSessionì´ í•µì‹¬.

Crew

CrewDAO

xml ì„¤ì •



ORM
OBJECT-RELATIONAL MAPPING

ë°”ë¼ë³´ëŠ” ì‹œê°ì´ ë‹¤ë¦„.

ê°ì²´ì§€í–¥ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ”ë° ê´€ê³„í˜•DBì— ì—°ê²°í•˜ê¸° ì–´ë µë‹¤.

SQLì— ì˜ì¡´ì ì¸ ê°œë°œ

----
public class Crew {
  private int id;
  private String name;
  private String nickname; // ì¶”ê°€
----

----
String sql...
----

select ì¶”ê°€ í–ˆëŠ”ë° updateì¶”ê°€ ì•ˆí–ˆìŒ

----
public class Crew {
  private int id;
  private String name;
  private String nickname;
  private Team team; // ì¶”ê°€
----

"ë¬¼ë¦¬ì ìœ¼ë¡œ SQLê³¼ JDBC APIë¥¼ ë°ì´í„° ì ‘ê·¼ ê³„ì¸µì— ìˆ¨ê¸°ëŠ” ë° ì„±ê³µí–ˆì„ì§€ëŠ” ëª°ë¼ë„, ë…¼ë¦¬ì ìœ¼ë¡œëŠ” ì—”í‹°í‹°ì™€ ì•„ì£¼ ê°•í•œ..."

íŒ¨ëŸ¬ë‹¤ì„ì˜ ë¶ˆì¼ì¹˜ - ì—°ê´€ ê´€ê³„ (ê°ì²´ ì°¸ì¡°), ìƒì†

ê°ì²´ ì§€í–¥ ì•ˆí•´!

ORM ë“±ì¥

Javaì—ì„œ JPAì¸í„°í˜ì´ìŠ¤

Hibernateë¼ëŠ” ëŒ€í‘œì ì¸ êµ¬í˜„ì²´

image::image-2021-03-26-10-58-58-259.png[]

image::image-2021-03-26-10-59-13-161.png[]

ENTITYMANGER - ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸

image::image-2021-03-26-10-59-46-712.png[]

flush() í•  ë•Œ ì¿¼ë¦¬ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±

image::image-2021-03-26-11-00-52-143.png[]

LAZY LOADING. Teamì¡°íšŒ ì•ˆí•˜ë©´ ì•ˆê°€ì ¸ ì™€ë„ ëœë‹¤.
DIRTY CHECKING. ë°”ë€ê±° ê²€ì‚¬
CACHING. ìºì‹œì— ìˆìœ¼ë©´ ì¡°íšŒì•ˆí•˜ê³  ìºì‹œì— ìˆëŠ” ê±° ì¤€ë‹¤

ì´ë™ìš±ë‹˜ ë³´ë¼ìƒ‰ ì±….

Spring Dataì§„ì˜ì˜ JPA

REPOSITORY

í•œë‹¨ê³„ ë” ì¶”ìƒí™”

image::image-2021-03-26-11-02-39-712.png[]

image::image-2021-03-26-11-03-06-802.png[]

image::image-2021-03-26-11-03-18-098.png[]

SIMPLE

image::image-2021-03-26-11-03-53-922.png[]

ORMì´ë¼ê³  í•˜ê¸°ì— ì‚´ì§ ì• ë§¤í•¨

"SPRING DATA JDBC A SIMPLE. LIMITED. OPINIONATED ORM."

image::image-2021-03-26-11-04-46-786.png[]

hibernate ì•ˆ ì“°ëŠ” êµ¬ì¡°.
-> ì•ˆì“°ëŠ” ê±´ ì•„ë‹ˆì§€ ì•Šë‚˜?

