= 08. DispatcherServlet 2부

https://www.inflearn.com/course/%EC%9B%B9-mvc/lecture/17387?tab=note&speed=1.5

DispatcherServlet 동작 원리
DispatcherServlet 초기화
* 다음의 특별한 타입의 빈들을 찾거나, 기본 전력에 해당하는 빈들을 등록한다.
* HandlerMapping: 핸들러를 찾아주는 인터페이스. 스트레티지 패턴
* HandlerAdapter: 핸들러를 실행하는 인터페이스
* HandlerExceptionResolver
* ViewResolver
* ...

DispatcherServlet 동작 순서
1. 요청을 분석한다. (로케일, 테마, 멀티파트 등)
2. (핸들러 맵핑에게 위임하여) 요청을 처리할 핸들러를 찾는다.
3. (등록되어 있는 핸들러 어댑터 중에) 해당 핸들러를 실행할 수 있는 "핸들러 어댑터"를 찾는다.
4. 찾아낸 "핸들러 어댑터"를 사용해서 핸들러의 응답을 처리한다.
** 핸들러의 리턴값을 보고 어떻게 처리할지 판단한다.
*** 뷰 이름에 해당하는 뷰를 찾아서 모델 데이터를 랜더링한다.
*** @ResponseEntity가 있다면 Converter를 사용해서 응답 본문을 만들고,
5. (부가적으로) 예외가 발생했다면, 예외 처리 핸들러에 요청 처리를 위임한다.
7. 최종적으로 응답을 보낸다.

----
@Controller
public class HelloController {
  @Autowired
  HelloService helloService;

  @GetMapping("/hello")
  @ResponseBody
  public String hello() {
    return "Hello, " + helloService.getname();
  }

  @GetMapping("/sample")
  public String sample() {
    return "/WEB-INF/sample.jsp";
  }
}
----


webapp/WEB-INF/sample.jsp
----
<html>
<body>
<h2>Hello Spring MVC!</h2>
</body>
</html>
----

InternalResourceView

mv가 null이 아님.

SimpleController

----
@...Controller("/simple")
public class SimpleController implements Controller {
  @Override
  public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) {
    return new ModelAndView("/WEB-INF/simple.jsp");
  }
}
----

webapp/WEB-INF/simple.jsp
----
<html>
<body>
<h2>Hello Simple MVC!</h2>
</body>
</html>
----

BeanNameUrlHandlerMapping



== References
* https://leejongchan.tistory.com/83?category=955821[https://leejongchan.tistory.com/83?category=955821]
