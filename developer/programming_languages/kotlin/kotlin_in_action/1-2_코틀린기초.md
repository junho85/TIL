# 2 코틀린 기초

* 함수, 변수, 클래스, enum, 프로퍼티를 선언하는 방법
* 제어 구조
* 스마트 캐스트
* 예외 던지기와 예외 잡기

변수, 함수, 클래스, 프로퍼티, 제어 구조, 스마트 캐스트 (타입 검사와 타입 캐스트, 타입 강제 변환을 하나로 엮은 기능), 예외처리

## 2.1 기본 요소: 함수와 변수

### 2.1.1 Hello, World!

```kotlin
fun main(args: Array<String>) {
  println("Hello, world!")
}
```

* 함수 선언할 때 fun 키워드 사용
* 파라미터 이름 뒤에 타입을 쓴다.
* 함수를 최상위 수준에 정의할 수 있다. 클래스 안에 함수를 넣을 필요 없음.
* 배열도 일반적인 클래처럼
* System.out.prinln 대신 println. 코틀린은 표준 자바 라이브러리 함수를 간결하게 사용할 수 있게 감싼 래퍼들을 제공함.
* 세미콜론 붙이지 않음

### 2.1.2 함수
REPL 에서 실습
```bash
$ kotlinc
```

```
>>> fun max(a: Int, b: Int): Int {
...   return if (a > b) a else b
... }
>>> println(max(1, 2))
2
```

코튼린에서 if 는 식이지 문이 아니다.

반면 대입문은 자바에서는 식이었으나 코틀린에서는 문

#### 식이 본문인 함수

```
fun max(a: Int, b: Int): Int = if (a > b) a else b
```

본문이 중괄호로 둘러싸인 함수를 **블록이 본문인 함수**라 부름

등호와 식으로 이뤄진 함수를 **식이 본문인 함수**라 부름

인텔리J 아이디어 팁. 이 두 방식의 함수를 서로 변환하는 메뉴가 있음.

반환 타입을 생략 했는데 **타입 추론**을 해 주기 때문

식이 본문인 함수의 반호나 타입만 생략 가능하다는 점에 유의

블록이 본문인 함수가 값을 ㅂ나환한다면 반드시 반환 타입을 지정하고 return 문을 사용해 반환 값을 명시해야 함.

### 2.1.3 변수
```
val question = "삶, 우주, 그리고 모든 것에 대한 궁극적인 질문"
val answer = 42
```
원한다면 타입을 명시해도 됨
```
val answer: Int = 42
```

부동소수점 상수를 사용하면 변수 타입은 Double 이 됨
```
val yearsToComputer = 7.5e6 // 7.5 x 10^6 = 7500000.0
```

초기화 식을 사용하지 않고 변수 선언하려면 변수 타입 반드시 명시
```
val answer: Int
answer = 42
```

초기화 식이 없다면 컴파일러가 타입을 추론할 수 없기 때문에 반드시 지정

#### 변경 가능한 변수와 변경 불가능한 변수

* val - 변경 불가능한(immutable) 참조를 저장하는 변수. 자바의 final 변수
* var - 변경 가능한(mutable) 참조. 자바의 일반 변수

variable이 형용사로 쓰이면 '변할 수 있는'이라는 뜻. 변수 말 자체가 이미 변화라는 개념이 내재돼 있음. 함수형 프로그래머 중에는 변경 불가능한 변수를 표현하기 위해 변수라는 단어 대신 '값'이나 '이름'이라는 단얼르 사용하기도 함. 문맥에 따라 '값'과 '이름'을 혼용하기도 함.

val 을 기본으로 하고 필요할 때에만 var 로 변경

val 변수는 한번만 초기화돼야 함

```kotlin
val message: String
if (canPerforOperation()) {
  message = "Success"
  // ...
}
else {
  message = "Failed"
}
```

val 참조 자체는 불변일지라도 그 참조가 가리키는 객체의 내부 값은 변경될 수 있다

```kotlin
val languages = arrayListOf("Java") // 불변 참조 선언
languages.add("Kotlin") // 참조가 가리키는 객체 내부 변경
```

var 키워드 사용하면 변수의 값을 변경할 수 있지만 변수의 타입은 고정돼 바뀌지 않음.

아래는 컴파일 오류. Error: type mismatch
```kotlin
var answer = 42
answer = "no answer"
```

어떤 타입의 변수에 다른 타입의 값을 저장하고 싶다면 변환 함수를 써서 값을 변수의 타입으로 변환하거나, 값을 변수에 대입할 수 있는 타입으로 강제 형 변환(coerce)해야 한다. 원시 타입의 변환에 대해서는 6.2.3절에서 다룸

### 2.1.4 더 쉽게 문자열 형식 지정: 문자열 템플릿

```kotlin
fun main(args: Array<String>) {
  val name = if (args.size > 0) args[0] else "Kotlin"
  println("Hello, $name!")
}
```
name 이라는 변수를 선언하고 문자열 리터럴 안에서 그 변수를 사용. 변수 앞에 $ 를 추가

자바의 문자열 접합 연산 ("Hello, " + name + "!")과 동일한 기능을 하짐나 좀 더 간결

$ escape 하려면 \$ 하면 됨 

```kotlin
println("\$x")
```

복잡한 식도 중괄호({})로 둘러싸서 문자열 템플릿 안에 넣을 수 있음.

```kotlin
fun main(args: Array<String>) {
  if (args.size > 0) {
    println("Hello, ${args[0]}!")
  }
}
```

```kotlin
fun main(args: Array<String>) {
  println("Hello, ${if (args.size > 0) args[0] else "someone"}!")
}
```

