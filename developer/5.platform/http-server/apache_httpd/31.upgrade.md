# apache httpd upgrade

## Upgrading to 2.4 from 2.2
* [Upgrading to 2.4 from 2.2](https://httpd.apache.org/docs/2.4/upgrading.html)

### 기본 denied
2.2
```
Order deny,allow
Deny from all
```

2.4
```
Require all denied
```

### 기본 allowed
2.2
```
Order allow,deny
Allow from all
```

2.4
```
Require all granted
```

### 기본 denied 인데 example.org 도메인의 모든 호스트 허용
A 레코드 기준?

2.2
```
Order Deny,Allow
Deny from all
Allow from example.org
```

2.4
```
Require host example.org
```

## 1.3 to 2.4
* 레거시 서버 업그레이드 할 일이 있어서 작업 하면서 정리해 본다.

### ServerType 옵션 없어짐
```
ServerType standalone
```
제거

### MinSpareServers, MaxSpareServers 는 mpm_prefork_module 모듈이 있을 때만 (IfModule 을 생략하려면 어떻게 해야 되지? 빌드 할 때 같이 빌드 해야 되나? 다른 방법 없을까?)
```
MinSpareServers 30
MaxSpareServers 50

<IfModule mpm_prefork_module>
    MinSpareServers 30
    MaxSpareServers 50
</IfModule>
```

### Port 는 Listen 으로
1.3
```
Port 80
```

2.4
```
Listen 80
```

### MaxClients 는 MaxRequestWorkers 로
1.3
```
MaxClients 1024
```

2.0 에는 설정이 있는듯
http://httpd.apache.org/docs/2.0/mod/mpm_common.html#maxclients

https://httpd.apache.org/docs/2.4/mod/mpm_common.html
에 의하면 MaxRequestWorkers 로 바뀐것으로 보인다. 2.3.13 이전 까지는 MaxClients 였다. MaxClients 도 아직까지는 지원하고 있다.

기본값은 256이고 높이려면 ServerLimit 도 올려 줘야 된다.
